{% extends "base_content.html" %}
{% load static %}

{% block head %}
<style>
.calendar-grid {
    display: grid;
    grid-template-columns: repeat(7, 1fr); /* 7 columns for 7 days of the week */
    gap: 10px; /* Add space between cells */
}

.day-cell {
    border: 1px solid #ddd;
    padding: 10px;
    text-align: center;
    background-color: #f9f9f9;
    min-height: 100px; /* Adjust height for uniformity */
    display: flex;
    flex-direction: column;
    justify-content: space-between;
}

.day-cell.bg-light {
    background-color: #eaeaea; /* Highlight empty or out-of-month days */
}

.day-cell .date {
    font-weight: bold;
    margin-bottom: 5px;
}

.day-cell ul {
    padding: 0;
    list-style: none;
}

.day-header {
    text-align: center;
    font-weight: bold;
    background-color: #007bff;
    color: white;
    padding: 5px;
    border-radius: 5px;
}
</style>
{% endblock %}

{% block content %}
<div class="container mt-5">
    <h1 class="mb-4">Welcome, {{ request.user.first_name }}!</h1>
    <h2 class="mb-4 text-center">Your Timetable for {{ month_name }} {{ year }}</h2>

    <!-- Navigation Buttons -->
    <div class="d-flex justify-content-between my-4">
        <a href="{% url 'student_timetable_with_date' prev_year prev_month %}" class="btn btn-primary">← Previous</a>
        <a href="{% url 'student_timetable_with_date' next_year next_month %}" class="btn btn-primary">Next →</a>
    </div>

    <!-- Calendar Grid -->
    <div class="calendar-grid">
        <!-- Render Day Headers -->
        <div class="day-header">Sunday</div>
        <div class="day-header">Monday</div>
        <div class="day-header">Tuesday</div>
        <div class="day-header">Wednesday</div>
        <div class="day-header">Thursday</div>
        <div class="day-header">Friday</div>
        <div class="day-header">Saturday</div>

        <!-- Render Empty Days Before the First Day of the Month -->
        {% for _ in empty_days|make_list %}
            <div class="day-cell bg-light"></div>
        {% endfor %}

        <!-- Render Calendar Days -->
        {% for week in month_days %}
            {% for day in week %}
                <div class="day-cell {% if day.date.month != month %}bg-light{% endif %}">
                    <div class="date">{{ day.date.day }}</div>
                    {% if day.lessons %}
                        <ul>
                            {% for lesson in day.lessons %}
                                <li>{{ lesson.name }} ({{ lesson.start_time }} - {{ lesson.end_time }})</li>
                            {% endfor %}
                        </ul>
                    {% else %}
                        <p class="text-muted">No lessons scheduled</p>
                    {% endif %}
                </div>
            {% endfor %}
        {% endfor %}
    </div>
</div>
{% endblock %}
